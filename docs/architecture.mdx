---
title: Arsitektur Aplikasi
description: Struktur dan arsitektur sistem Humanika
---

# Arsitektur Aplikasi Humanika

Dokumentasi lengkap mengenai arsitektur, struktur, dan komponen sistem Humanika.

## ğŸ—ï¸ Arsitektur Overall

Humanika dibangun dengan arsitektur **Full-Stack Modern** menggunakan teknologi terkini:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend       â”‚    â”‚   Database      â”‚
â”‚   (Next.js)     â”‚â—„â”€â”€â–ºâ”‚   (Next.js API) â”‚â—„â”€â”€â–ºâ”‚   (MongoDB)     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ React 18      â”‚    â”‚ â€¢ API Routes    â”‚    â”‚ â€¢ Prisma ORM    â”‚
â”‚ â€¢ TypeScript    â”‚    â”‚ â€¢ NextAuth.js   â”‚    â”‚ â€¢ Schema Models â”‚
â”‚ â€¢ Tailwind CSS  â”‚    â”‚ â€¢ Google APIs   â”‚    â”‚ â€¢ Indexing      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Struktur Project

```
humanika/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (admin)/                  # Admin routes (protected)
â”‚   â”œâ”€â”€ (public)/                 # Public routes
â”‚   â”œâ”€â”€ api/                      # API routes
â”‚   â”œâ”€â”€ auth/                     # Authentication pages
â”‚   â””â”€â”€ docs/                     # Documentation pages
â”œâ”€â”€ components/                   # React components
â”‚   â”œâ”€â”€ admin/                    # Admin-specific components
â”‚   â”œâ”€â”€ public/                   # Public components
â”‚   â”œâ”€â”€ ui/                       # Reusable UI components
â”‚   â””â”€â”€ MDXComponents.tsx         # MDX rendering components
â”œâ”€â”€ docs/                         # Documentation (MDX files)
â”œâ”€â”€ hooks/                        # Custom React hooks
â”œâ”€â”€ lib/                          # Utility libraries
â”œâ”€â”€ prisma/                       # Database schema & migrations
â”œâ”€â”€ services/                     # Business logic services
â”œâ”€â”€ types/                        # TypeScript type definitions
â””â”€â”€ use-cases/                    # Application use cases
```

## ğŸ—„ï¸ Database Schema

### Model Utama

| Model           | Deskripsi                | Relasi Utama                    |
| --------------- | ------------------------ | ------------------------------- |
| **User**        | Data pengguna sistem     | Management, Articles, Finances  |
| **Period**      | Periode kepengurusan     | Management, Events, Finances    |
| **Management**  | Jabatan manajemen        | User, Period                    |
| **WorkProgram** | Program kerja departemen | Period, Events, DepartmentTasks |
| **Event**       | Kegiatan & acara         | Period, WorkProgram, Galleries  |
| **Document**    | File dokumen             | Event, Letter, DocumentType     |
| **Finance**     | Transaksi keuangan       | Period, Event, FinanceCategory  |
| **Article**     | Konten artikel           | User, Period, ArticleCategory   |
| **Letter**      | Surat masuk/keluar       | User, Period, Event             |
| **Approval**    | Sistem persetujuan       | Semua entity                    |

### Enums & Konstanta

```typescript
// User Roles Hierarchy
enum UserRole {
  DPO       // Dewan Pengurus Organisasi (Highest)
  BPH       // Badan Pengurus Harian
  PENGURUS  // Pengurus Departemen
  ANGGOTA   // Anggota Biasa (Lowest)
}

// Entity Status
enum Status {
  DRAFT     // Draft, editable
  PENDING   // Waiting for approval
  PUBLISH   // Public & active
  PRIVATE   // Not public but active
  ARCHIVE   // Archived, not active
}

// Approval Status
enum StatusApproval {
  PENDING   // Waiting for approval
  APPROVED  // Approved
  REJECTED  // Rejected
  CANCELLED // Cancelled by user
}
```

## ğŸ” Sistem Authentication & Authorization

### Authentication Flow

```
1. User Login â†’ Google OAuth â†’ NextAuth.js
2. JWT Token Generation â†’ Session Management
3. Role-Based Access Control â†’ Route Protection
4. Activity Logging â†’ Audit Trail
```

### Role-Based Permissions

| Role         | Permissions                                      |
| ------------ | ------------------------------------------------ |
| **DPO**      | Full access, approve all entities                |
| **BPH**      | Manage governance, approve department activities |
| **PENGURUS** | Manage department content, request approvals     |
| **ANGGOTA**  | View content, limited create permissions         |

## ğŸ”„ Approval Workflow

### Workflow States

```mermaid
graph TD
    A[DRAFT] --> B[PENDING]
    B --> C[APPROVED]
    B --> D[REJECTED]
    C --> E[PUBLISH/PRIVATE]
    D --> A
    E --> F[ARCHIVE]
```

### Approval Types

- **WORK_PROGRAM**: Program kerja departemen
- **EVENT**: Kegiatan & acara
- **FINANCE**: Transaksi keuangan
- **DOCUMENT**: Upload dokumen
- **LETTER**: Surat masuk/keluar

## ğŸ“Š Data Flow Architecture

### Request Flow

```
Client Request â†’ Middleware â†’ API Route â†’ Service Layer
    â†“
Use Case â†’ Repository â†’ Database
    â†“
Response â† DTO â† Service Layer
```

### Service Layer Pattern

```typescript
// Service Pattern Implementation
class UserService {
  async createUser(data: CreateUserInput): Promise<User> {
    // Business logic
    const user = await this.userRepository.create(data);
    // Side effects
    await this.activityLogService.log("CREATE", "User", user.id);
    return user;
  }
}
```

## ğŸ”§ API Architecture

### RESTful Endpoints Structure

```
/api/
â”œâ”€â”€ auth/              # Authentication
â”œâ”€â”€ user/              # User management
â”œâ”€â”€ management/        # Organization structure
â”œâ”€â”€ period/            # Periods management
â”œâ”€â”€ work-program/      # Department programs
â”œâ”€â”€ event/             # Events management
â”œâ”€â”€ document/          # Document management
â”œâ”€â”€ finance/           # Financial transactions
â”œâ”€â”€ article/           # Content management
â”œâ”€â”€ gallery/           # Gallery management
â”œâ”€â”€ letter/            # Letter management
â”œâ”€â”€ approval/          # Approval system
â””â”€â”€ google-drive/      # External integrations
```

### API Response Format

```typescript
// Standard API Response
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
}

// Paginated Response
interface PaginatedResponse<T> extends ApiResponse<T[]> {
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
}
```

## ğŸ¨ Frontend Architecture

### Component Structure

```
components/
â”œâ”€â”€ ui/                # Reusable UI components (shadcn/ui)
â”œâ”€â”€ admin/             # Admin-specific components
â”œâ”€â”€ public/            # Public-facing components
â”œâ”€â”€ forms/             # Form components
â”œâ”€â”€ tables/            # Data table components
â””â”€â”€ modals/            # Modal dialogs
```

### State Management

```typescript
// TanStack Query for server state
const useUsers = (filters: UserFilters) => {
  return useQuery({
    queryKey: ["users", filters],
    queryFn: () => userService.getUsers(filters),
    staleTime: 5 * 60 * 1000, // 5 minutes
  });
};

// React Hook Form for form state
const UserForm = () => {
  const form = useForm<UserFormData>({
    resolver: zodResolver(userSchema),
  });
};
```

## ğŸ”— Integration Architecture

### Google Services Integration

```
Google OAuth 2.0 â†’ Authentication
Google Drive API â†’ File Storage & Management
Google Cloud Console â†’ API Management
```

### Third-Party Services

- **Resend**: Email notifications
- **MongoDB Atlas**: Cloud database
- **Vercel**: Deployment platform

## ğŸ“ˆ Performance Optimizations

### Frontend Optimizations

- **Server-Side Rendering (SSR)**: Next.js App Router
- **Static Generation**: Documentation pages
- **Image Optimization**: Next.js Image component
- **Code Splitting**: Dynamic imports
- **Caching**: React Query caching

### Database Optimizations

- **Indexing**: Strategic database indexes
- **Pagination**: Efficient data loading
- **Connection Pooling**: Prisma connection management
- **Query Optimization**: Selective field loading

## ğŸ§ª Testing Strategy

### Testing Pyramid

```
End-to-End Tests (E2E)
    â†“
Integration Tests
    â†“
Unit Tests
```

### Test Coverage Areas

- **Unit Tests**: Components, hooks, utilities
- **Integration Tests**: API routes, services
- **E2E Tests**: Critical user workflows

## ğŸš€ Deployment Architecture

### Environment Strategy

```
Development â†’ Staging â†’ Production
     â†“           â†“         â†“
Local Dev â†’ Vercel Preview â†’ Vercel Production
```

### CI/CD Pipeline

```yaml
# GitHub Actions Workflow
on: [push, pull_request]
jobs:
  test:
    - run: npm run lint
    - run: npm run type-check
    - run: npm run test
  build:
    - run: npm run build
  deploy:
    - deploy to Vercel
```

## ğŸ”’ Security Measures

### Authentication Security

- **JWT Tokens**: Secure token management
- **Session Management**: Secure session handling
- **Password Policies**: Strong password requirements
- **Rate Limiting**: API rate limiting

### Data Security

- **Input Validation**: Zod schema validation
- **SQL Injection Prevention**: Prisma ORM
- **XSS Protection**: React sanitization
- **CSRF Protection**: NextAuth.js

## ğŸ“Š Monitoring & Logging

### Application Monitoring

- **Error Tracking**: Sentry integration
- **Performance Monitoring**: Vercel Analytics
- **Activity Logging**: Comprehensive audit trail
- **Health Checks**: System health monitoring

### Logging Strategy

```typescript
// Structured Logging
logger.info("User created", {
  userId: user.id,
  action: "CREATE",
  entity: "User",
  timestamp: new Date(),
  ipAddress: request.ip,
});
```

---

**Selanjutnya**: [API Reference](/docs/api)
